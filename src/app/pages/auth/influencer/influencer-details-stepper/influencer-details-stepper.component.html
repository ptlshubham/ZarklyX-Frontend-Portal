<div class="grid lg:grid-cols-2 grow min-h-[95vh]">
    <div class="flex justify-center items-center p-8  lg:p-10 order-2 lg:order-1">
        <div class="kt-card max-w-[425px] w-full">
            <form [formGroup]="influencerForm" (submit)="onSubmit()" class="kt-card-content flex flex-col gap-5 p-6"
                id="influencerForm">
                <div class="text-center mb-1">
                    <h3 class="text-lg font-medium text-mono leading-none">
                        @if (currentStep === 1) {
                        Select Categories
                        } @else if (currentStep === 2) {
                        Enter Your Social Media Details
                        }
                    </h3>
                </div>
                <div class="flex items-center gap-2 mb-2">
                    <div class="flex-1 h-2 rounded-full" [class.bg-primary]="currentStep >= 1"
                        [class.bg-gray-200]="currentStep < 1"></div>
                    <div class="flex-1 h-2 rounded-full" [class.bg-primary]="currentStep >= 2"
                        [class.bg-gray-200]="currentStep < 2"></div>
                </div>

                <!-- Step 1: Influencer Category -->
                @if (currentStep === 1) {
                <div class="flex flex-col gap-4">
                    <div class="flex flex-col gap-3">
                        <!-- <label class="kt-form-label font-normal text-mono text-center">
                            Select Your Influencer Category <span class="text-red-500">*</span>
                        </label> -->
                        <p class="text-sm text-secondary-foreground text-center mb-2">Choose one or more areas that
                            apply to your business</p>

                        <div class="flex flex-wrap gap-2 justify-center">
                            @for (option of influencerCategories; track option.value) {
                            <button type="button" (click)="toggleInfluencerCategory(option.value)"
                                class="kt-badge inline-flex items-center gap-2 px-3 py-3.5 rounded-lg text-[14px] font-normal transition-all whitespace-nowrap border-gray-300"
                                [class.kt-badge-primary]="isCategorySelected(option.value)"
                            [class.kt-badge-outline]="!isCategorySelected(option.value)">
                                <i class="ki-outline text-base" [ngClass]="option.icon"></i>
                                <span>{{ option.label }}</span>
                                @if (isCategorySelected(option.value)) {
                                <i class="ki-filled ki-cross text-xs"></i>
                                }
                            </button>
                            }
                        </div>
                    </div>

                    <button type="button" (click)="nextStep()" class="kt-btn kt-btn-primary flex justify-center grow"
                        [disabled]="!isStepValid()">
                        Continue to Next Step
                    </button>
                </div>
                }
                @if (currentStep === 2) {
                <div class="flex flex-col gap-4">

                    <div class="flex flex-wrap gap-3 justify-center">
                        @for (option of socialMediaOptions; track option.value) {
                        <button type="button" (click)="toggleSocialMedia(option.value)"
                            class="kt-badge inline-flex items-center gap-2 px-3 py-8 rounded-lg text-[14px] font-normal transition-all whitespace-nowrap border-gray-300"
                            [class.kt-badge-primary]="isSocialMediaSelected(option.value)"
                            [class.kt-badge-outline]="!isSocialMediaSelected(option.value)">
                            <img [src]="option.icon" class="w-8 h-8 object-contain" />
                            @if (isSocialMediaSelected(option.value)) {
                            <i class="ki-filled ki-cross text-xs"></i>
                            }
                        </button>
                        }

                    </div>
                    <div class="flex gap-2">
                        <button type="button" (click)="prevStep()"
                            class="kt-btn kt-btn-outline flex justify-center grow">
                            Back
                        </button>
                        <button type="submit" class="kt-btn kt-btn-primary flex justify-center grow">
                            @if (isLoading) {
                            <span>Submitting...</span>
                            } @else {
                            <span>Complete Setup</span>
                            }
                        </button>
                    </div>
                </div>
                }
            </form>
        </div>
    </div>

    <div class="lg:rounded-xl lg:border lg:border-border lg:m-5 order-1 lg:order-2 bg-top xxl:bg-center xl:bg-cover bg-no-repeat branded-bg"
        [ngClass]="getStepBgClass()">
        <div class="flex flex-col justify-between h-full p-8 lg:p-16">
            <div class="flex flex-col gap-4">
                <a href="html/demo1.html">
                    <img class="h-[28px] max-w-none" src="/assets/media/app/mini-logo.svg" />
                </a>
                <div class="flex flex-col gap-3">
                    <h3 class="text-2xl font-semibold text-mono">
                        Welcome to ZarklyX
                    </h3>
                    <div class="text-base font-medium text-secondary-foreground">
                        Let's get started by setting up
                        <br />
                        your
                        <span class="text-mono font-semibold">
                            profile
                        </span>
                        and understanding
                        <br />
                        your business needs.
                    </div>
                </div>
            </div>
            <div class="flex-1"></div>
        </div>
    </div>
    @if (isLoading) {
    <div class="loading-overlay">
        <div class="loader">
            <div class="spinner"></div>
            <p class="text-white text-lg font-medium">Submitting...</p>
        </div>
    </div>
    }
</div>